(this["webpackJsonpshopify-frontend-challenge"]=this["webpackJsonpshopify-frontend-challenge"]||[]).push([[0],{15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),s=(a(11),a(1)),i=a.n(s),r=a(4),c=a.n(r),o=a(5),l=a(6),h=a(2),u=a(8),d=a(7);var m=function(e){return Object(n.jsx)("input",{type:"text",className:"search-bar",placeholder:"Enter a title...",onChange:function(t){e.updateSearch(t.target.value)}})};function j(e){var t,a,s,i="page-item";return e.active?i=i.concat(" ","active"):p(e.page,e.total)||(i=i.concat(" ","disabled")),Object(n.jsx)("li",{className:i,children:Object(n.jsx)("a",{className:"page-link",onClick:(t=function(){return e.update(null,e.page)},a=p(e.page,e.total),s=e.active,a&&!s?t:function(){return null}),children:e.text})})}function p(e,t){var a=1+10*(e-1),n=Math.min(10*e,t);return e>0&&a<=n}var b=function(e){var t=e.page,a=e.totalResults;return Object(n.jsx)("nav",{"aria-label":"Page navigation example",children:Object(n.jsxs)("ul",{className:"pagination",children:[Object(n.jsx)(j,{text:"First",page:1,active:!1,total:a,update:e.update}),Object(n.jsx)(j,{text:"Previous",page:t-1,active:!1,total:a,update:e.update}),Object(n.jsx)(j,{text:t.toString(),page:t,active:!0,total:a,update:e.update}),Object(n.jsx)(j,{text:"Next",page:t+1,active:!1,total:a,update:e.update}),Object(n.jsx)(j,{text:"Last",page:Math.ceil((a+1)/10),active:!1,total:a,update:e.update})]})})};var v=function(e){var t,a,s,i=e.results;if(null===i||"False"===i.Response){var r="Incorrect IMDb ID."==i.Error?"Search results will appear here.":i.Error;a=Object(n.jsx)("div",{children:r}),s=0}else t=i.Search.map((function(t){var a=e.nominations.length>=5||e.nominations.includes(t),s="https://www.imdb.com/title/".concat(t.imdbID);return Object(n.jsxs)("li",{children:[Object(n.jsxs)("a",{href:s,target:"_blank",rel:"noopener noreferrer",children:[t.Title," (",t.Year,")"]}),Object(n.jsx)("button",{disabled:a,onClick:function(){return e.Add(t)},children:"Nominate this movie"})]},t.imdbID)})),s=parseInt(i.totalResults);return Object(n.jsxs)("div",{id:"movie-results",className:"bg-light m-2 p-2 border border-dark rounded",children:[Object(n.jsx)("h2",{className:"p-1",children:"Search Results"}),a,Object(n.jsx)(b,{page:e.page,update:e.updateSearch,totalResults:s}),Object(n.jsx)("ul",{children:t})]})};var g=function(e){var t,a,s=e.nominations;return 0===s.length?a=Object(n.jsx)("div",{children:"No nominations- add some by searching for movies!"}):t=e.nominations.map((function(t){return Object(n.jsxs)("li",{children:[Object(n.jsxs)("span",{children:[t.Title," (",t.Year,")"]}),Object(n.jsx)("button",{onClick:function(){return e.Remove(t)},children:"Remove from nominations"})]},t.Title)})),Object(n.jsxs)("div",{id:"nomination-list",className:"bg-light m-2 p-2 border border-dark rounded",children:[Object(n.jsxs)("h2",{className:"p-1",children:["Current Nominations (",s.length," / 5)"]}),a,Object(n.jsx)("ul",{children:t})]})},x=(a(15),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(o.a)(this,a),n=t.call(this,e);var s=new URL(window.location.href);return n.baseUrl=s.origin.concat(s.pathname),n.state={results:{Response:"False",Error:"Incorrect IMDb ID."},nominations:[],lastSearchTerm:"",resultsPage:1},n.updateSearch=n.updateSearch.bind(Object(h.a)(n)),n.addNomination=n.addNomination.bind(Object(h.a)(n)),n.removeNomination=n.removeNomination.bind(Object(h.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=new URL(window.location.href).searchParams,t=e.has("s")?e.get("s"):"",a=e.has("page")?e.get("page"):1;this.updateSearch(t,a)}},{key:"getResults",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a="https://www.omdbapi.com/?apikey=".concat("17595268","&s=").concat(e,"&type=movie&page=").concat(t);return fetch(a)}},{key:"updateResults",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.getResults(e,a).then((function(e){return e.json()})).then((function(e){t.setState({results:e})})).catch((function(e){console.log("".concat(e))}))}},{key:"updateSearch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e||(e=this.state.lastSearchTerm),this.updateResults(e,t),this.setState({resultsPage:t,lastSearchTerm:e})}},{key:"addNomination",value:function(e){var t=this.state.nominations.slice();t.push(e),this.setState({nominations:t})}},{key:"removeNomination",value:function(e){var t=this.state.nominations.indexOf(e),a=this.state.nominations.slice();a.splice(t,1),this.setState({nominations:a})}},{key:"render",value:function(){var e=5===this.state.nominations.length?Object(n.jsx)("div",{id:"max-nominations",className:"banner alert alert-success",children:Object(n.jsx)("span",{className:"p-2",children:"Maximum number of nominations reached, thank you!"})}):"",t="";if(""!==this.state.lastSearchTerm){var a=new URL(this.baseUrl);a.search="s=".concat(this.state.lastSearchTerm,"&page=").concat(this.state.resultsPage),t=Object(n.jsxs)("div",{id:"share-link",className:"p-2",children:["Share this search: ",a.toString()]})}return Object(n.jsxs)("div",{children:[e,Object(n.jsxs)("div",{className:"p-2 m-2",children:[Object(n.jsx)("h1",{children:"OMDB Nominations"}),Object(n.jsx)(m,{updateSearch:this.updateSearch}),t]}),Object(n.jsxs)("div",{className:"container m-0 bg-light",children:[Object(n.jsx)(v,{results:this.state.results,nominations:this.state.nominations,page:this.state.resultsPage,updateSearch:this.updateSearch,Add:this.addNomination}),Object(n.jsx)(g,{nominations:this.state.nominations,Remove:this.removeNomination})]})]})}}]),a}(i.a.Component));c.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(x,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.6e8aa896.chunk.js.map