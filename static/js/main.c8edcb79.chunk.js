(this["webpackJsonpshopify-frontend-challenge"]=this["webpackJsonpshopify-frontend-challenge"]||[]).push([[0],{16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),i=(a(12),a(1)),s=a.n(i),c=a(4),r=a.n(c),o=a(5),l=a(6),u=a(2),h=a(9),d=a(8),j=a(7);var m=function(e){var t=Object(i.useState)(""),a=Object(j.a)(t,2),s=a[0],c=a[1];return Object(n.jsxs)("div",{children:[Object(n.jsx)("input",{type:"text",id:"search-bar",placeholder:"Enter a title...",value:s,onChange:function(t){c(t.target.value),e.updateSearch(t.target.value)}}),Object(n.jsx)("button",{id:"search-clear",onClick:function(t){c(""),e.updateSearch("")},children:"X"}),Object(n.jsx)("button",{id:"search-submit",onClick:function(t){e.updateSearch(null)},children:"Search"})]})};function p(e){var t,a,i,s="page-item";return e.active?s=s.concat(" ","active"):b(e.page,e.total)||(s=s.concat(" ","disabled")),Object(n.jsx)("li",{className:s,children:Object(n.jsx)("a",{className:"page-link",onClick:(t=function(){return e.update(null,e.page)},a=b(e.page,e.total),i=e.active,a&&!i?t:function(){return null}),children:e.text})})}function b(e,t){var a=1+10*(e-1),n=Math.min(10*e,t);return e>0&&a<=n}var v=function(e){var t=e.page,a=e.totalResults;return Object(n.jsx)("nav",{"aria-label":"Page navigation example",children:Object(n.jsxs)("ul",{className:"pagination",children:[Object(n.jsx)(p,{text:"First",page:1,active:!1,total:a,update:e.update}),Object(n.jsx)(p,{text:"Previous",page:t-1,active:!1,total:a,update:e.update}),Object(n.jsx)(p,{text:t.toString(),page:t,active:!0,total:a,update:e.update}),Object(n.jsx)(p,{text:"Next",page:t+1,active:!1,total:a,update:e.update}),Object(n.jsx)(p,{text:"Last",page:Math.ceil((a+1)/10),active:!1,total:a,update:e.update})]})})};var g=function(e){var t,a,i,s=e.results;if(null===s||"False"===s.Response){var c="Incorrect IMDb ID."==s.Error?"Search results will appear here.":s.Error;a=Object(n.jsx)("div",{children:c}),i=0}else t=s.Search.map((function(t){var a=e.nominations.length>=5||e.nominations.includes(t),i="https://www.imdb.com/title/".concat(t.imdbID);return Object(n.jsxs)("li",{children:[Object(n.jsx)("span",{className:"mr-1",children:Object(n.jsxs)("a",{href:i,target:"_blank",rel:"noopener noreferrer",children:[t.Title," (",t.Year,")"]})}),Object(n.jsx)("button",{disabled:a,onClick:function(){return e.Add(t)},children:"Nominate"})]},t.imdbID)})),i=parseInt(s.totalResults);return Object(n.jsxs)("div",{id:"movie-results",className:"bg-light p-2 border border-dark rounded",children:[Object(n.jsx)("h2",{children:"Search Results"}),Object(n.jsx)(v,{page:e.page,update:e.updateSearch,totalResults:i}),a,Object(n.jsx)("ul",{children:t})]})};var x=function(e){var t,a,i=e.nominations;return 0===i.length?a=Object(n.jsx)("div",{children:"No nominations- add some by searching for movies!"}):t=e.nominations.map((function(t){return Object(n.jsxs)("li",{children:[Object(n.jsxs)("span",{className:"mr-1",children:[t.Title," (",t.Year,")"]}),Object(n.jsx)("button",{onClick:function(){return e.Remove(t)},children:"Remove"})]},t.Title)})),Object(n.jsxs)("div",{id:"nomination-list",className:"bg-light mx-2 p-2 border border-dark rounded",children:[Object(n.jsxs)("h2",{children:["Current Nominations (",i.length," / 5)"]}),a,Object(n.jsx)("ul",{children:t})]})},O=(a(16),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(o.a)(this,a),n=t.call(this,e);var i=new URL(window.location.href);n.baseUrl=i.origin.concat(i.pathname);var s=localStorage.nominations?JSON.parse(localStorage.nominations):[];return n.state={results:{Response:"False",Error:"Incorrect IMDb ID."},nominations:s,lastSearchTerm:"",resultsPage:1},n.updateSearch=n.updateSearch.bind(Object(u.a)(n)),n.addNomination=n.addNomination.bind(Object(u.a)(n)),n.removeNomination=n.removeNomination.bind(Object(u.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=new URL(window.location.href).searchParams,t=e.has("s")?e.get("s"):"",a=e.has("page")?e.get("page"):1;this.updateSearch(t,a)}},{key:"getResults",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a="https://www.omdbapi.com/?apikey=".concat("17595268","&s=").concat(e,"&type=movie&page=").concat(t);return fetch(a)}},{key:"updateResults",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.getResults(e,a).then((function(e){return e.json()})).then((function(e){t.setState({results:e})})).catch((function(e){console.log("".concat(e))}))}},{key:"updateSearch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;null===e&&(e=this.state.lastSearchTerm),this.updateResults(e,t),this.setState({resultsPage:t,lastSearchTerm:e})}},{key:"addNomination",value:function(e){var t=this.state.nominations.slice();t.push(e),this.setState({nominations:t}),this.updateNominationCache(t)}},{key:"removeNomination",value:function(e){var t=this.state.nominations.indexOf(e),a=this.state.nominations.slice();a.splice(t,1),this.setState({nominations:a}),this.updateNominationCache(a)}},{key:"updateNominationCache",value:function(e){localStorage.nominations=JSON.stringify(e)}},{key:"render",value:function(){var e=5===this.state.nominations.length?Object(n.jsx)("div",{id:"max-nominations",className:"banner alert alert-success",children:Object(n.jsx)("span",{className:"p-2",children:"Maximum number of nominations reached, thank you!"})}):Object(n.jsx)("div",{}),t=Object(n.jsx)("div",{id:"share-link"});if(""!==this.state.lastSearchTerm&&"False"!==this.state.results.Response){var a=new URL(this.baseUrl);a.search="s=".concat(this.state.lastSearchTerm,"&page=").concat(this.state.resultsPage),t="Share this search: ".concat(a.toString())}return Object(n.jsxs)("div",{children:[e,Object(n.jsxs)("div",{className:"p-2 m-2",children:[Object(n.jsx)("h1",{children:"OMDB Nominations"}),Object(n.jsx)(m,{updateSearch:this.updateSearch}),Object(n.jsx)("div",{id:"share-link",className:"p-2",children:t})]}),Object(n.jsxs)("div",{className:"container m-0",children:[Object(n.jsx)(g,{results:this.state.results,nominations:this.state.nominations,page:this.state.resultsPage,updateSearch:this.updateSearch,Add:this.addNomination}),Object(n.jsx)(x,{nominations:this.state.nominations,Remove:this.removeNomination})]})]})}}]),a}(s.a.Component));r.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(O,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.c8edcb79.chunk.js.map